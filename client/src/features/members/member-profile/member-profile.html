@let member = memberService.member();

@if (member) {

<div class="flex flex-col gap-3">

    <div class="flex gap-3">
        <span class="font-semibold">Member since:</span>
        <span>{{ member.created | date: 'longDate' }}</span>
    </div>

    <div class="flex gap-3">
        <span class="font-semibold">Last active:</span>
        <span>{{ member.lastActive | date: 'dd MMM yyyy h:mm a' }}</span>
    </div>

    <h3 class="text-lg font-semibold text-primary">About {{ member.displayName }}</h3>
  @if (accountService.currentUser()?.memberId === member.id && !memberService.editMode()) {
    <button class="btn btn-primary"
            (click)="memberService.editMode.set(true)">
        Edit Profile
    </button>
  }
    @if (memberService.editMode()) {

        <form #editForm="ngForm"
              (ngSubmit)="updateProfile()"
              class="flex flex-col w-full gap-4">

            <label class="floating-label">
                <span>Display name</span>
                <input class="input w-full"
                       name="displayName"
                       [(ngModel)]="editableMember.displayName">
            </label>

            <label class="floating-label">
                <span>Description</span>
                <textarea class="textarea w-full"
                          name="description"
                          [(ngModel)]="editableMember.description"></textarea>
            </label>

            <label class="floating-label">
                <span>City</span>
                <input class="input w-full"
                       name="city"
                       [(ngModel)]="editableMember.city">
            </label>

            <label class="floating-label">
                <span>Country</span>
                <input class="input w-full"
                       name="country"
                       [(ngModel)]="editableMember.country">
            </label>

            <div class="flex self-end">
                <button type="submit"
                        [disabled]="!editForm.dirty"
                        class="btn btn-success">
                    Submit
                </button>
            </div>

        </form>

    } @else {

        <p>{{ member.description }}</p>

    }

</div>

}
